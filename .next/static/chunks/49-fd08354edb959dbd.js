"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{83049:function(e,a,s){s.d(a,{Z:function(){return j}});var r=s(57437),t=s(2265),l=s(92369),d=s(98617),n=s(15868),i=s(89345),c=s(83229),o=s(32489),m=s(87769),x=s(42208),u=s(76865),h=s(62869),g=s(66070),f=s(95186),w=s(26815),N=s(35974),p=s(13665),b=s(98782);function j(){let{user:e,userData:a,refreshUserData:s}=(0,p.a)();if(!e)return(0,r.jsx)("div",{className:"text-center p-8",children:(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No user found. Please log in."})});if(!a)return(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading profile data..."}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["User: ",null==e?void 0:e.email]})]});let[j,y]=(0,t.useState)(!1),[v,k]=(0,t.useState)(!1),[P,C]=(0,t.useState)(!1),[S,Z]=(0,t.useState)(""),[A,F]=(0,t.useState)(""),[E,_]=(0,t.useState)(!1),[I,z]=(0,t.useState)(!1),[L,D]=(0,t.useState)({fullName:(null==a?void 0:a.fullName)||"",username:(null==a?void 0:a.username)||""}),[R,U]=(0,t.useState)({newPassword:"",confirmPassword:""}),O=async()=>{if(a&&e){if(!L.fullName.trim()||!L.username.trim()){Z("Full name and username are required");return}if(L.username.length<3){Z("Username must be at least 3 characters long");return}C(!0),Z(""),F("");try{await (0,b.Lj)(e.uid,{fullName:L.fullName,username:L.username}),await s(),F("Profile updated successfully!"),y(!1)}catch(e){Z(e.message||"Failed to update profile")}finally{C(!1)}}},Y=async()=>{if(!R.newPassword||!R.confirmPassword){Z("Please fill in all password fields");return}if(R.newPassword!==R.confirmPassword){Z("Passwords do not match");return}C(!0),Z(""),F("");try{await (0,b.Cp)(R.newPassword),F("Password changed successfully!"),k(!1),U({newPassword:"",confirmPassword:""})}catch(e){e.message.includes("requires-recent-login")?Z("For security reasons, please use the 'Send Password Reset Email' option below to change your password."):Z(e.message||"Failed to change password")}finally{C(!1)}},q=async()=>{if(!(null==a?void 0:a.email)){Z("No email address found");return}C(!0),Z(""),F("");try{await (0,b.c0)(a.email),F("Password reset email sent! Check your inbox and follow the instructions to reset your password."),k(!1)}catch(e){Z(e.message||"Failed to send password reset email")}finally{C(!1)}},M=()=>{y(!1),k(!1),D({fullName:(null==a?void 0:a.fullName)||"",username:(null==a?void 0:a.username)||""}),U({newPassword:"",confirmPassword:""}),Z(""),F("")};return a?(0,r.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile Settings"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your account information"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(g.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"h-5 w-5"}),"Profile Information",a.isPremium&&(0,r.jsxs)(N.C,{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white ml-2",children:[(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Premium"]})]}),!j&&(0,r.jsxs)(h.z,{variant:"outline",onClick:()=>y(!0),children:[(0,r.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),(0,r.jsxs)(g.aY,{className:"space-y-4",children:[S&&(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md text-sm",children:S}),A&&(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md text-sm",children:A}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w._,{htmlFor:"fullName",className:"dark:text-white",children:"Full Name"}),j?(0,r.jsx)(f.I,{id:"fullName",value:L.fullName,onChange:e=>D(a=>({...a,fullName:e.target.value})),placeholder:"Enter your full name",className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"}):(0,r.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md text-gray-900 dark:text-white",children:a.fullName||"Not set"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w._,{htmlFor:"username",className:"dark:text-white",children:"Username"}),j?(0,r.jsx)(f.I,{id:"username",value:L.username,onChange:e=>D(a=>({...a,username:e.target.value})),placeholder:"Enter your username",className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"}):(0,r.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md text-gray-900 dark:text-white",children:a.username||"Not set"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w._,{htmlFor:"email",className:"dark:text-white",children:"Email Address"}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.email}),(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-auto",children:"(Cannot be changed)"})]})]}),j&&(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)(h.z,{onClick:O,disabled:P,children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})}),(0,r.jsxs)(h.z,{variant:"outline",onClick:M,children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(g.ll,{className:"dark:text-white",children:"Change Password"}),!v&&(0,r.jsx)(h.z,{variant:"outline",onClick:()=>k(!0),children:"Change Password"})]}),(0,r.jsx)(g.aY,{children:v?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w._,{htmlFor:"newPassword",className:"dark:text-white",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.I,{id:"newPassword",type:E?"text":"password",value:R.newPassword,onChange:e=>U(a=>({...a,newPassword:e.target.value})),placeholder:"Enter new password",className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"}),(0,r.jsx)("button",{type:"button",onClick:()=>_(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:E?(0,r.jsx)(m.Z,{className:"h-4 w-4"}):(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w._,{htmlFor:"confirmPassword",className:"dark:text-white",children:"Confirm New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.I,{id:"confirmPassword",type:I?"text":"password",value:R.confirmPassword,onChange:e=>U(a=>({...a,confirmPassword:e.target.value})),placeholder:"Confirm new password",className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"}),(0,r.jsx)("button",{type:"button",onClick:()=>z(!I),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:I?(0,r.jsx)(m.Z,{className:"h-4 w-4"}):(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.z,{onClick:Y,disabled:P,children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing..."]}):"Change Password"}),(0,r.jsx)(h.z,{variant:"outline",onClick:M,children:"Cancel"})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Alternative Method"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"If you're having trouble changing your password, you can receive a password reset email instead."}),(0,r.jsx)(h.z,{variant:"outline",size:"sm",onClick:q,disabled:P,className:"mt-2 border-blue-300 text-blue-700 hover:bg-blue-100 dark:border-blue-600 dark:text-blue-300 dark:hover:bg-blue-900/30",children:"Send Password Reset Email"})]})]})})]})]}):(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:'Click "Change Password" to update your account password.'})})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsx)(g.ll,{className:"dark:text-white",children:"Account Information"})}),(0,r.jsxs)(g.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Account Created"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a.updatedAt?new Date(a.updatedAt).toLocaleDateString():"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Account Type"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a.isPremium?"Premium Account":"Free Account"}),a.isPremium&&(0,r.jsxs)(N.C,{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:[(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Premium"]})]})]}),a.isPremium&&a.premiumExpiresAt&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Premium Expires"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(a.premiumExpiresAt).toLocaleDateString()})]})]})]})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-4rem)]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading profile..."})]})})}},95186:function(e,a,s){s.d(a,{I:function(){return d}});var r=s(57437),t=s(2265),l=s(94508);let d=t.forwardRef((e,a)=>{let{className:s,type:t,...d}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...d})});d.displayName="Input"},26815:function(e,a,s){s.d(a,{_:function(){return c}});var r=s(57437),t=s(2265),l=s(6394),d=s(90535),n=s(94508);let i=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.f,{ref:a,className:(0,n.cn)(i(),s),...t})});c.displayName=l.f.displayName}}]);