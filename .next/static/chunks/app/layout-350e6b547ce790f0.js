(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8921:function(e,t,r){Promise.resolve().then(r.bind(r,13665)),Promise.resolve().then(r.t.bind(r,47960,23)),Promise.resolve().then(r.bind(r,82798)),Promise.resolve().then(r.t.bind(r,92894,23))},13665:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=r(57437),n=r(2265),o=r(82148),i=r(88213),s=r(98782);let l=(0,n.createContext)({user:null,userData:null,loading:!0,refreshUserData:async()=>{}}),u=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:t}=e,[r,u]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0),w=async()=>{r&&c(await (0,s.is)(r.uid))};return(0,n.useEffect)(()=>(0,o.Aj)(i.I,async e=>{u(e),e?c(await (0,s.is)(e.uid)):c(null),h(!1)}),[]),(0,a.jsx)(l.Provider,{value:{user:r,userData:d,loading:m,refreshUserData:w},children:t})}},98782:function(e,t,r){"use strict";r.d(t,{Cp:function(){return h},Lj:function(){return w},c0:function(){return m},is:function(){return p},ni:function(){return c},oH:function(){return i},qj:function(){return d},uo:function(){return s},y1:function(){return l},zB:function(){return u}});var a=r(82148),n=r(5978),o=r(88213);let i=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),s=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/.test(e),l=async(e,t,r)=>{if(!i(e))throw Error("Please enter a valid email address");if(!s(t))throw Error("Password must be at least 8 characters with uppercase, lowercase, and number");if(!r.trim())throw Error("Please enter your full name");try{let i=(await (0,a.Xb)(o.I,e,t)).user;await (0,a.ck)(i,{displayName:r});let s={uid:i.uid,email:i.email,displayName:r,fullName:r,username:r.toLowerCase().replace(/\s+/g,""),isPremium:!1,isEnterprise:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),plannerCount:0};return await (0,n.pl)((0,n.JU)(o.db,"users",i.uid),s),{user:i,userData:s}}catch(e){if(console.error("Error signing up:",e),"auth/email-already-in-use"===e.code)throw Error("An account with this email already exists");if("auth/weak-password"===e.code)throw Error("Password is too weak");if("auth/invalid-email"===e.code)throw Error("Invalid email address");throw Error(e.message||"Failed to create account")}},u=async(e,t)=>{if(!i(e))throw Error("Please enter a valid email address");if(!t.trim())throw Error("Please enter your password");try{let r=(await (0,a.e5)(o.I,e,t)).user;try{await (0,n.r7)((0,n.JU)(o.db,"users",r.uid),{lastLoginAt:new Date().toISOString()})}catch(e){console.warn("Could not update last login time:",e)}return r}catch(e){if(console.error("Error signing in:",e),"auth/user-not-found"===e.code)throw Error("No account found with this email");if("auth/wrong-password"===e.code)throw Error("Incorrect password");if("auth/invalid-email"===e.code)throw Error("Invalid email address");if("auth/too-many-requests"===e.code)throw Error("Too many failed attempts. Please try again later");throw Error(e.message||"Failed to sign in")}},d=async()=>{try{let e=new a.hJ,t=(await (0,a.rh)(o.I,e)).user,r=(0,n.JU)(o.db,"users",t.uid);if((await (0,n.QT)(r)).exists())await (0,n.r7)(r,{lastLoginAt:new Date().toISOString()});else{let e={uid:t.uid,email:t.email,displayName:t.displayName||t.email.split("@")[0],fullName:t.displayName||t.email.split("@")[0],username:(t.displayName||t.email.split("@")[0]).toLowerCase().replace(/\s+/g,""),isPremium:!1,isEnterprise:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),plannerCount:0};await (0,n.pl)(r,e)}return t}catch(e){if(console.error("Error signing in with Google:",e),"auth/popup-closed-by-user"===e.code)throw Error("Sign-in was cancelled");if("auth/popup-blocked"===e.code)throw Error("Popup was blocked. Please allow popups and try again");throw Error(e.message||"Failed to sign in with Google")}},c=async()=>{try{await (0,a.w7)(o.I)}catch(e){throw console.error("Error logging out:",e),Error("Failed to log out")}},m=async e=>{if(!i(e))throw Error("Please enter a valid email address");try{await (0,a.LS)(o.I,e)}catch(e){if(console.error("Error sending password reset email:",e),"auth/user-not-found"===e.code)throw Error("No account found with this email address");throw Error(e.message||"Failed to send password reset email")}},h=async e=>{if(!s(e))throw Error("Password must be at least 8 characters with uppercase, lowercase, and number");try{let t=o.I.currentUser;if(!t)throw Error("No user is currently signed in");await (0,a.gQ)(t,e)}catch(e){if(console.error("Error changing password:",e),"auth/requires-recent-login"===e.code)throw Error("Please sign out and sign back in before changing your password");throw Error(e.message||"Failed to change password")}},w=async(e,t)=>{try{let r=o.I.currentUser;if(!r||r.uid!==e)throw Error("User not authenticated or UID mismatch");let i=(0,n.JU)(o.db,"users",e),s={updatedAt:new Date().toISOString()};t.fullName&&(s.fullName=t.fullName,s.displayName=t.fullName,await (0,a.ck)(r,{displayName:t.fullName})),t.username&&(s.username=t.username),await (0,n.r7)(i,s)}catch(e){throw console.error("Error updating user profile:",e),Error(e.message||"Failed to update profile")}},p=async e=>{var t,r,a,i,s,l,u,d,c,m,h,w,p,f,g,y,v,E,S,I;try{let h=await (0,n.QT)((0,n.JU)(o.db,"users",e));if(h.exists())return h.data();{let h={uid:e,email:(null===(t=o.I.currentUser)||void 0===t?void 0:t.email)||"",displayName:(null===(r=o.I.currentUser)||void 0===r?void 0:r.displayName)||(null===(i=o.I.currentUser)||void 0===i?void 0:null===(a=i.email)||void 0===a?void 0:a.split("@")[0])||"User",fullName:(null===(s=o.I.currentUser)||void 0===s?void 0:s.displayName)||(null===(u=o.I.currentUser)||void 0===u?void 0:null===(l=u.email)||void 0===l?void 0:l.split("@")[0])||"User",username:((null===(d=o.I.currentUser)||void 0===d?void 0:d.displayName)||(null===(m=o.I.currentUser)||void 0===m?void 0:null===(c=m.email)||void 0===c?void 0:c.split("@")[0])||"user").toLowerCase().replace(/\s+/g,""),isPremium:!1,isEnterprise:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),plannerCount:0};try{return await (0,n.pl)((0,n.JU)(o.db,"users",e),h),h}catch(e){return console.warn("Could not create user document, using default data:",e),h}}}catch(t){return console.error("Error getting user data:",t),{uid:e,email:(null===(h=o.I.currentUser)||void 0===h?void 0:h.email)||"",displayName:(null===(w=o.I.currentUser)||void 0===w?void 0:w.displayName)||(null===(f=o.I.currentUser)||void 0===f?void 0:null===(p=f.email)||void 0===p?void 0:p.split("@")[0])||"User",fullName:(null===(g=o.I.currentUser)||void 0===g?void 0:g.displayName)||(null===(v=o.I.currentUser)||void 0===v?void 0:null===(y=v.email)||void 0===y?void 0:y.split("@")[0])||"User",username:((null===(E=o.I.currentUser)||void 0===E?void 0:E.displayName)||(null===(I=o.I.currentUser)||void 0===I?void 0:null===(S=I.email)||void 0===S?void 0:S.split("@")[0])||"user").toLowerCase().replace(/\s+/g,""),isPremium:!1,isEnterprise:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),plannerCount:0}}}},88213:function(e,t,r){"use strict";r.d(t,{I:function(){return s},db:function(){return l}});var a=r(738),n=r(82148),o=r(5978);let i=(0,a.ZF)({apiKey:"AIzaSyDiqLqmiZDc_kIgHoC3JKEq2V31BNBaR_k",authDomain:"webdev-d1a20.firebaseapp.com",projectId:"webdev-d1a20",storageBucket:"webdev-d1a20.firebasestorage.app",messagingSenderId:"23584087197",appId:"1:23584087197:web:7360271f071da38b324874",measurementId:"G-6YHRMQ16E8"}),s=(0,n.v0)(i),l=(0,o.ad)(i)},82798:function(e,t,r){"use strict";r.d(t,{ThemeProvider:function(){return o}});var a=r(57437);r(2265);var n=r(25922);function o(e){let{children:t,...r}=e;return(0,a.jsx)(n.f,{...r,children:t})}},47960:function(){},92894:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}},25922:function(e,t,r){"use strict";r.d(t,{F:function(){return d},f:function(){return c}});var a=r(2265),n=(e,t,r,a,n,o,i,s)=>{let l=document.documentElement,u=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,a=r&&o?n.map(e=>o[e]||e):n;r?(l.classList.remove(...a),l.classList.add(o&&o[t]?o[t]:t)):l.setAttribute(e,t)}),s&&u.includes(t)&&(l.style.colorScheme=t)}if(a)d(a);else try{let e=localStorage.getItem(t)||r,a=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(a)}catch(e){}},o=["light","dark"],i="(prefers-color-scheme: dark)",s="undefined"==typeof window,l=a.createContext(void 0),u={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=a.useContext(l))?e:u},c=e=>a.useContext(l)?a.createElement(a.Fragment,null,e.children):a.createElement(h,{...e}),m=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:u="theme",themes:d=m,defaultTheme:c=n?"system":"light",attribute:h="data-theme",value:y,children:v,nonce:E,scriptProps:S}=e,[I,b]=a.useState(()=>p(u,c)),[N,A]=a.useState(()=>"system"===I?g():I),C=y?Object.values(y):d,U=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&n&&(t=g());let a=y?y[t]:t,i=r?f(E):null,l=document.documentElement,u=e=>{"class"===e?(l.classList.remove(...C),a&&l.classList.add(a)):e.startsWith("data-")&&(a?l.setAttribute(e,a):l.removeAttribute(e))};if(Array.isArray(h)?h.forEach(u):u(h),s){let e=o.includes(c)?c:null,r=o.includes(t)?t:e;l.style.colorScheme=r}null==i||i()},[E]),P=a.useCallback(e=>{let t="function"==typeof e?e(I):e;b(t);try{localStorage.setItem(u,t)}catch(e){}},[I]),k=a.useCallback(e=>{A(g(e)),"system"===I&&n&&!t&&U("system")},[I,t]);a.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(k),k(e),()=>e.removeListener(k)},[k]),a.useEffect(()=>{let e=e=>{e.key===u&&(e.newValue?b(e.newValue):P(c))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[P]),a.useEffect(()=>{U(null!=t?t:I)},[t,I]);let L=a.useMemo(()=>({theme:I,setTheme:P,forcedTheme:t,resolvedTheme:"system"===I?N:I,themes:n?[...d,"system"]:d,systemTheme:n?N:void 0}),[I,P,t,N,n,d]);return a.createElement(l.Provider,{value:L},a.createElement(w,{forcedTheme:t,storageKey:u,attribute:h,enableSystem:n,enableColorScheme:s,defaultTheme:c,value:y,themes:d,nonce:E,scriptProps:S}),v)},w=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:i,enableColorScheme:s,defaultTheme:l,value:u,themes:d,nonce:c,scriptProps:m}=e,h=JSON.stringify([o,r,l,t,d,u,i,s]).slice(1,-1);return a.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?c:"",dangerouslySetInnerHTML:{__html:"(".concat(n.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let r;if(!s){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")}},function(e){e.O(0,[587,806,609,15,351,971,117,744],function(){return e(e.s=8921)}),_N_E=e.O()}]);